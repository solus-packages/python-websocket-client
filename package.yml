name       : python-websocket-client
version    : 0.46.0
release    : 3
source     :
    - https://files.pythonhosted.org/packages/source/w/websocket-client/websocket_client-0.46.0.tar.gz : 933f6bbf08b381f2adbca9e93d7e7958ba212b42c73acb310b18f0fbe74f3738
license    : LGPL-2.1
component  : programming.python
summary    : Websocket client for python
description: |
    The websocket-client module is WebSocket client for python. It provides the low level APIs for WebSocket. All APIs are the synchronous functions.
builddeps  :
    - pkgconfig(python-3.5)
    - python-backports.ssl_match_hostname
    - python-setuptools
rundeps    :
    - python-backports.ssl_match_hostname
    - python-six
build      : |
    %python3_setup
    %python_setup
install    : |
    %python3_install
    for _f in "$installdir"/usr/bin/*.py; do
      mv -v "$_f" "${_f%}3"
    done
    %python_install

    # remove tests that got installed into the buildroot
    rm -r $installdir/usr/lib/python?.?/site-packages/websocket/tests/
check      : |
    pushd $PKG_BUILD_DIR/py3build
        python3 setup.py test
    popd

    pushd $PKG_BUILD_DIR/py2build
        python setup.py test
    popd
